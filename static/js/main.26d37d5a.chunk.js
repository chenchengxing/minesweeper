(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{14:function(e,n,t){},15:function(e,n,t){},16:function(e,n,t){"use strict";t.r(n);var r,c=t(0),i=t.n(c),u=t(7),o=t.n(u),a=(t(14),t(1)),l=t(2),s=t(5);t(15);!function(e){e[e.Covered=0]="Covered",e[e.Uncovered=1]="Uncovered",e[e.Flagged=2]="Flagged"}(r||(r={}));var f=function(e){return e.status===r.Covered},d=function(e){return e.status===r.Flagged};var v=t(8),m=t.n(v);var O=function(e){var n=e.cell,t=e.onClick,c=n.status;return i.a.createElement("div",{"data-testid":"cell",className:m()("cell",{"cell-covered":c===r.Covered,"cell-uncovered":c===r.Uncovered,"cell-flagged":c===r.Flagged}),onClick:t},function(e){switch(e.status){case r.Covered:case r.Flagged:return null;case r.Uncovered:return e.isMine?"*":0===e.numOfMinesAround?null:e.numOfMinesAround}}(n))};var h=function(e){var n=e.cells,t=e.onCellRightClick,r=e.onCellClick,u=e.numOfCols,o=void 0===u?10:u,a=e.numOfRows,l=void 0===a?8:a,s=Object(c.useRef)(null);!function(e,n){var t=Object(c.useRef)();Object(c.useEffect)((function(){t.current=n}),[n]),Object(c.useEffect)((function(){var n=e.current;if(n&&n.addEventListener){var r=function(e){return t.current(e)};return n.addEventListener("contextmenu",r),function(){n.removeEventListener("contextmenu",r)}}}),[])}(s,Object(c.useCallback)((function(e){e.preventDefault();var n=e.currentTarget.getBoundingClientRect(),r=e.clientX-n.left,c=e.clientY-n.top,i=Math.floor(c/32),u=Math.floor(r/32);t(i*o+u)}),[t]));var f=function(e,n){return function(){r(e*o+n)}},d=function(e,n,t){if(e.length!==t*n)return[];for(var r=0,c=[],i=0;i<n;i++){for(var u=[],o=0;o<t;o++)u.push(e[r]),r+=1;c.push(u)}return c}(n,l,o);return i.a.createElement("div",{ref:s},d.map((function(e,n){return i.a.createElement("div",{key:n,className:"cell-row"},e.map((function(e,t){return i.a.createElement(O,{key:e.index,cell:e,onClick:f(n,t)})})))})))};var g=function(e){return e.cells.length?i.a.createElement(h,e):null};function C(e){var n=e.cells,t=e.mineIndex,r=e.numOfRows,c=e.numOfCols,i=n.length,u=[];if(b(t,i,r,c)){var o=t-c;u.push(o),j(o,i,r,c)&&u.push(o-1),E(o,i,r,c)&&u.push(o+1)}if(j(t,i,r,c)&&u.push(t-1),E(t,i,r,c)&&u.push(t+1),I(t,i,r,c)){var a=t+c;u.push(a),j(a,i,r,c)&&u.push(a-1),E(a,i,r,c)&&u.push(a+1)}return u}var p,b=function(e,n,t,r){return!(e<r)},I=function(e,n,t,r){return!(e>=(t-1)*r)},j=function(e,n,t,r){return!(e%r===0)},E=function(e,n,t,r){return!((e+1)%r===0)},M=function(e,n,t,r){return b(e,n,t,r)&&j(e-r,n,t,r)},x=function(e,n,t,r){return b(e,n,t,r)&&E(e-r,n,t,r)},w=function(e,n,t,r){return I(e,n,t,r)&&j(e+r,n,t,r)},A=function(e,n,t,r){return I(e,n,t,r)&&E(e+r,n,t,r)};function N(e,n){return e.slice().map((function(e){if(n.includes(e.index)){var t=e.numOfMinesAround+1<=8?e.numOfMinesAround+1:e.numOfMinesAround;return Object(a.a)({},e,{numOfMinesAround:t})}return e}))}function k(e,n,t,c,i){var u=e.index,o=n.length;[{hasDirectionFunction:b,getIndex:function(e,n,t){return e-t}},{hasDirectionFunction:x,getIndex:function(e,n,t){return e-t+1}},{hasDirectionFunction:E,getIndex:function(e,n,t){return e+1}},{hasDirectionFunction:A,getIndex:function(e,n,t){return e+t+1}},{hasDirectionFunction:I,getIndex:function(e,n,t){return e+t}},{hasDirectionFunction:w,getIndex:function(e,n,t){return e+t-1}},{hasDirectionFunction:j,getIndex:function(e,n,t){return e-1}},{hasDirectionFunction:M,getIndex:function(e,n,t){return e-t-1}}].forEach((function(e){var a=e.hasDirectionFunction,l=e.getIndex;if(a(u,o,t,c)){var s=l(u,t,c),f=n[s];f.status=r.Uncovered,f.visited||0!==f.numOfMinesAround||i.push(f)}}))}function F(e){var n=e.filter((function(e){return e.isMine})).every((function(e){return e.status===r.Flagged})),t=e.filter((function(e){return!e.isMine})).every((function(e){return e.status===r.Uncovered}));return n&&t}!function(e){e[e.PLAYING=0]="PLAYING",e[e.WIN=1]="WIN",e[e.LOST=2]="LOST"}(p||(p={}));var L=function(){for(var e=Object(c.useState)([]),n=Object(s.a)(e,2),t=n[0],u=n[1],o=Object(c.useState)(p.PLAYING),v=Object(s.a)(o,2),m=v[0],O=v[1],h=[],b=0;b<80;b++){var I={index:b,status:r.Covered,isMine:!1,numOfMinesAround:0};h.push(I)}Object(c.useEffect)((function(){j()}),[]);var j=function(){O(p.PLAYING),u(function(e){for(var n=e.cells,t=e.numOfMines,r=e.numOfRows,c=e.numOfCols,i=0,u={},o=n.length,a=n.slice();i<t;){var l=Math.floor(Math.random()*o);if(l in u);else a[l].isMine=!0,a=N(a,C({cells:a,mineIndex:l,numOfRows:r,numOfCols:c})),u[l]=!0,i+=1}return a}({cells:h,numOfMines:10,numOfCols:10,numOfRows:8}))};return i.a.createElement("div",{className:"App"},i.a.createElement("div",{className:"main"},i.a.createElement("div",{className:"control-bar"},i.a.createElement("header",null,"Minesweeper!"),m===p.PLAYING?i.a.createElement("div",null,10-t.filter((function(e){return d(e)})).length):null,m===p.LOST?i.a.createElement("button",{onClick:j},"Game Over.. Restart?"):null,m===p.WIN?i.a.createElement("button",{onClick:j},"Cong! Restart?"):null),i.a.createElement(g,{cells:t,onCellRightClick:function(e){if(m===p.PLAYING){var n=t[e];if(f(n)){var c=[].concat(Object(l.a)(t.slice(0,e)),[Object(a.a)({},n,{status:r.Flagged})],Object(l.a)(t.slice(e+1)));u(c),F(c)&&O(p.WIN)}else d(n)&&u([].concat(Object(l.a)(t.slice(0,e)),[Object(a.a)({},n,{status:r.Covered})],Object(l.a)(t.slice(e+1))))}},onCellClick:function(e){if(m===p.PLAYING){var n,c=t[e],i=c.isMine,o=c.numOfMinesAround;if(f(c))i||0!==o?(n=[].concat(Object(l.a)(t.slice(0,e)),[Object(a.a)({},c,{status:r.Uncovered})],Object(l.a)(t.slice(e+1))),u(n)):(n=function(e){for(var n=e.cells,t=e.originCell,c=e.numOfRows,i=e.numOfCols,u=[Object(a.a)({},t,{visited:!1})],o=n.slice().map((function(e){return e.index===t.index?Object(a.a)({},e,{visited:!1,status:r.Uncovered}):Object(a.a)({},e,{visited:!1})}));u.length;){var l=u[u.length-1];o[l.index].visited=!0,u.splice(u.length-1,1),k(l,o,c,i,u)}return o}({cells:t,originCell:c,numOfCols:10,numOfRows:8}),u(n)),i?O(p.LOST):F(n)&&O(p.WIN)}}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(L,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},9:function(e,n,t){e.exports=t(16)}},[[9,1,2]]]);
//# sourceMappingURL=main.26d37d5a.chunk.js.map